(this["webpackJsonppopular-song"]=this["webpackJsonppopular-song"]||[]).push([[0],{21:function(e,t,n){},31:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),s=n(24),c=n.n(s),i=(n(31),n(9)),o=n(10),l=n(12),u=n(11),d=n(16),j=n(13),b=n(7),h=n.n(b),p=n(22),m=n(14),O=n(19);n(38),n(45);O.a.initializeApp({apiKey:"AIzaSyAiNoZeBjqVeQqrdyaX47iYmHw0jqCjdjo",authDomain:"comp426-final-60caa.firebaseapp.com",databaseURL:"https://comp426-final-60caa-default-rtdb.firebaseio.com",projectId:"comp426-final-60caa",storageBucket:"comp426-final-60caa.appspot.com",messagingSenderId:"359399505831"});var f=O.a.auth(),x=O.a.firestore(),v=function(){var e=Object(m.a)(h.a.mark((function e(t,n){var r,a,s,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return r=x.doc("users/".concat(t.uid)),e.next=5,r.get();case 5:if(e.sent.exists){e.next=16;break}return a=t.email,s=t.displayName,c=t.photoURL,e.prev=8,e.next=11,r.set(Object(p.a)({displayName:s,email:a,photoURL:c},n));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(8),console.error("Error creating user document",e.t0);case 16:return e.abrupt("return",g(t.uid));case 17:case"end":return e.stop()}}),e,null,[[8,13]])})));return function(t,n){return e.apply(this,arguments)}}(),g=function(){var e=Object(m.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,x.doc("users/".concat(t)).get();case 5:return n=e.sent,e.abrupt("return",Object(p.a)({uid:t},n.data()));case 9:e.prev=9,e.t0=e.catch(2),console.error("Error fetching user",e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),y=(n(21),n(1)),w=function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(""),c=Object(j.a)(s,2),i=c[0],o=c[1],l=Object(r.useState)(null),u=Object(j.a)(l,2),b=u[0],h=u[1],p=function(e){var t=e.currentTarget,n=t.name,r=t.value;"userEmail"===n?a(r):"userPassword"===n&&o(r)};return Object(y.jsxs)("div",{children:[Object(y.jsx)("h2",{className:"title",children:"Sign In"}),Object(y.jsxs)("div",{children:[null!==b&&Object(y.jsx)("div",{children:b}),Object(y.jsxs)("form",{className:"loginForm",children:[Object(y.jsx)("label",{className:"fieldLabel",children:"Email:"}),Object(y.jsx)("input",{className:"field",type:"email",name:"userEmail",value:n,placeholder:"e.g: kevin221@gmail.com",id:"userEmail",onChange:function(e){return p(e)}}),Object(y.jsx)("label",{className:"fieldLabel",children:"Password:"}),Object(y.jsx)("input",{className:"field",type:"password",name:"userPassword",value:i,placeholder:"Your Password",id:"userPassword",onChange:function(e){return p(e)}}),Object(y.jsx)("br",{})," ",Object(y.jsx)("button",{className:"submit",onClick:function(e){!function(e,t,n){e.preventDefault(),f.signInWithEmailAndPassword(t,n).catch((function(e){h("Error signing in with password and email!"),console.error("Error signing in with password and email",e)}))}(e,n,i)},children:"Sign in"})]}),Object(y.jsxs)("p",{children:["Don't have an account?"," ",Object(y.jsx)(d.a,{to:"signUp",children:"Sign up here"})," ",Object(y.jsx)("br",{})," "]})]})]})},N=function(){var e=Object(r.useState)(""),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(""),c=Object(j.a)(s,2),i=c[0],o=c[1],l=Object(r.useState)(""),u=Object(j.a)(l,2),b=u[0],p=u[1],O=Object(r.useState)(null),x=Object(j.a)(O,2),g=x[0],w=x[1],N=function(){var e=Object(m.a)(h.a.mark((function e(t,n,r){var s,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,f.createUserWithEmailAndPassword(n,r);case 4:s=e.sent,c=s.user,v(c,{displayName:b}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),w("Error Signing up with email and password");case 12:a(""),o(""),p("");case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),S=function(e){var t=e.currentTarget,n=t.name,r=t.value;"userEmail"===n?a(r):"userPassword"===n?o(r):"displayName"===n&&p(r)};return Object(y.jsxs)("div",{className:"mt-8",children:[Object(y.jsx)("h1",{className:"text-3xl mb-2 text-center font-bold",children:"Sign Up"}),Object(y.jsxs)("div",{className:"border border-blue-400 mx-auto w-11/12 md:w-2/4 rounded py-8 px-4 md:px-8",children:[null!==g&&Object(y.jsx)("div",{className:"py-4 bg-red-600 w-full text-white text-center mb-3",children:g}),Object(y.jsxs)("form",{className:"",children:[Object(y.jsx)("label",{htmlFor:"displayName",className:"block",children:"Display Name:"}),Object(y.jsx)("input",{type:"text",className:"my-1 p-1 w-full ",name:"displayName",value:b,placeholder:"E.g: Faruq",id:"displayName",onChange:function(e){return S(e)}}),Object(y.jsx)("label",{htmlFor:"userEmail",className:"block",children:"Email:"}),Object(y.jsx)("input",{type:"email",className:"my-1 p-1 w-full",name:"userEmail",value:n,placeholder:"E.g: faruq123@gmail.com",id:"userEmail",onChange:function(e){return S(e)}}),Object(y.jsx)("label",{htmlFor:"userPassword",className:"block",children:"Password:"}),Object(y.jsx)("input",{type:"password",className:"mt-1 mb-3 p-1 w-full",name:"userPassword",value:i,placeholder:"Your Password",id:"userPassword",onChange:function(e){return S(e)}}),Object(y.jsx)("button",{className:"bg-green-400 hover:bg-green-500 w-full py-2 text-white",onClick:function(e){N(e,n,i)},children:"Sign up"})]}),Object(y.jsx)("p",{className:"text-center my-3",children:"or"}),Object(y.jsx)("button",{className:"bg-red-500 hover:bg-red-600 w-full py-2 text-white",children:"Sign In with Google"}),Object(y.jsxs)("p",{className:"text-center my-3",children:["Already have an account?"," ",Object(y.jsx)(d.a,{to:"/",className:"text-blue-500 hover:text-blue-600",children:"Sign in here"})]})]})]})},S=(n(42),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={songTitle:r.props.song,error:null,isLoaded:!1,items:[]},r}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("https://api.spotify.com/v1/search?q="+this.state.songTitle+"&type=track",{method:"GET",headers:{Authorization:"Bearer"},type:"track"}).then((function(e){return e.json()})).then((function(t){return e.setState({isLoaded:!0,items:t.tracks.items})}))}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.isLoaded,r=e.items;return t?Object(y.jsxs)("div",{children:["Error: ",t.message]}):n?(console.log(r),Object(y.jsxs)("div",{children:[Object(y.jsxs)("h1",{children:['Search results for: "',this.state.songTitle,'"']}),Object(y.jsx)("ul",{children:r.map((function(e){return Object(y.jsxs)("div",{className:"searchResult",children:[Object(y.jsx)("strong",{className:"songLabel",children:"Title:"})," ",e.name,", ",Object(y.jsx)("strong",{className:"songLabel",children:"Artist:"})," ",e.artists[0].name,"  ",Object(y.jsx)("a",{href:e.external_urls.spotify,children:"Click!"})]},e.id)}))})]})):Object(y.jsx)("div",{children:"Loading..."})}}]),n}(r.Component)),k=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={error:null,isLoaded:!1,items:[],songInfo:r.props.song},r}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.setState({isLoaded:!0})}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.isLoaded,r=e.items;return t?Object(y.jsxs)("div",{children:["Error: ",t.message]}):n?(console.log(r),Object(y.jsx)("div",{children:Object(y.jsx)(S,{song:this.state.songInfo})})):Object(y.jsx)("div",{children:"Loading..."})}}]),n}(r.Component),C=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).state={error:null,isLoaded:!1,user:r.props.currUser,value:"",renderSong:!1},r}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.setState({isLoaded:!0})}},{key:"handleChange",value:function(e){e.preventDefault(),console.log(e.target.value),this.setState({value:e.target.value})}},{key:"handleSubmit",value:function(e){console.log("submitted"),e.preventDefault(),this.setState({renderSong:!0})}},{key:"render",value:function(){var e=this,t=this.state,n=t.error,r=t.isLoaded;return n?Object(y.jsxs)("div",{children:["Error: ",n.message]}):r?Object(y.jsxs)("div",{children:[Object(y.jsxs)("h2",{className:"welcome",children:["Welcome, ",this.state.user.displayName]}),Object(y.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(y.jsxs)("label",{children:["Search:",Object(y.jsx)("input",{type:"text",name:"name",value:this.state.value,onChange:function(t){return e.handleChange(t)}})]}),Object(y.jsx)("input",{type:"submit",value:"Submit"})]}),Object(y.jsx)("div",{children:this.state.renderSong?Object(y.jsx)(k,{song:this.state.value}):Object(y.jsx)("p",{children:"this part will have song info if you search!"})}),Object(y.jsx)("div",{children:Object(y.jsx)("button",{onClick:function(){f.signOut()},children:"Sign out"})})]}):Object(y.jsx)("div",{children:"Loading..."})}}]),n}(r.Component),E=Object(r.createContext)({user:null}),L=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),s=0;s<r;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={user:null},e.componentDidMount=Object(m.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:f.onAuthStateChanged(function(){var t=Object(m.a)(h.a.mark((function t(n){var r;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v(n);case 2:r=t.sent,e.setState({user:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)}))),e}return Object(o.a)(n,[{key:"render",value:function(){return Object(y.jsx)(E.Provider,{value:this.state.user,children:this.props.children})}}]),n}(r.Component);var P=function(){var e=Object(r.useContext)(E);return e?Object(y.jsx)(C,{currUser:e}):Object(y.jsxs)(d.b,{children:[Object(y.jsx)(N,{path:"signUp"}),Object(y.jsx)(w,{path:"/"})]})},D=(n(43),function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(y.jsx)("body",{children:Object(y.jsxs)("div",{className:"main",children:[Object(y.jsx)("title",{children:"Song-O-Matic"}),Object(y.jsx)("h1",{className:"title",children:"Song-O-Matic"}),Object(y.jsx)(L,{children:Object(y.jsx)(P,{})})]})})}}]),n}(r.Component)),A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,46)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),s(e),c(e)}))};c.a.render(Object(y.jsx)(a.a.StrictMode,{children:Object(y.jsx)(D,{})}),document.getElementById("root")),A()}},[[44,1,2]]]);
//# sourceMappingURL=main.74c161d0.chunk.js.map